"use strict";(self.webpackChunke_commerce=self.webpackChunke_commerce||[]).push([[510],{9510:(m,d,r)=>{r.r(d),r.d(d,{ProductsComponent:()=>M});var n=r(6814),p=r(1120),h=r(8129),a=r(530),i=r(95),t=r(4769),c=r(0),l=r(6286),C=r(2425),v=r(9196);function E(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"i",18),t.NdJ("click",function(){t.CHM(e);const _=t.oxw().$implicit,u=t.oxw(2);return t.KtG(u.addFav(_._id))}),t.qZA()}}const P=function(o){return["/productdetails",o]};function f(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7),t.YNc(2,E,1,0,"i",8),t.TgZ(3,"header",9),t._UZ(4,"img",10),t.TgZ(5,"h3",11),t._uU(6),t.ALo(7,"cuttext"),t.qZA(),t.TgZ(8,"h4",12),t._uU(9),t.qZA(),t.TgZ(10,"div",13)(11,"span",14),t._uU(12),t.ALo(13,"currency"),t.qZA(),t.TgZ(14,"span"),t._UZ(15,"i",15),t.TgZ(16,"span",16),t._uU(17),t.qZA()()()(),t.TgZ(18,"footer")(19,"button",17),t.NdJ("click",function(){const u=t.CHM(e).$implicit,O=t.oxw(2);return t.KtG(O.addProduct(u._id))}),t._uU(20,"+Add To Cart"),t.qZA()()()()}if(2&o){const e=g.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("ngIf",!s.wishListData.includes(e._id)),t.xp6(1),t.Q6J("routerLink",t.VKq(15,P,e._id)),t.xp6(1),t.Q6J("src",e.imageCover,t.LSH)("title",e.title)("alt",e.title),t.xp6(2),t.Oqu(t.xi3(7,9,e.title,3)),t.xp6(3),t.Oqu(e.category.name),t.xp6(3),t.Oqu(t.xi3(13,12,e.price,"EGP")),t.xp6(5),t.Oqu(e.ratingsAverage)}}function x(o,g){if(1&o){const e=t.EpF();t.TgZ(0,"section",1)(1,"h2",2),t._uU(2,"Products"),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(_){t.CHM(e);const u=t.oxw();return t.KtG(u.term=_)}),t.qZA(),t.TgZ(4,"div",4),t.YNc(5,f,21,17,"div",5),t.ALo(6,"search"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngModel",e.term),t.xp6(2),t.Q6J("ngForOf",t.xi3(6,2,e.products,e.term))}}let M=(()=>{class o{constructor(e,s,_,u){this._ProductService=e,this._CartService=s,this._ToastrService=_,this._WishlistService=u,this.products=[],this.wishListData=[],this.term=""}ngOnInit(){this._ProductService.getProduct().subscribe({next:e=>{console.log("products",e.data),this.products=e.data}})}addProduct(e){this._CartService.addToCart(e).subscribe({next:s=>{console.log(s),console.log(s.message),this._ToastrService.success(s.message),this._CartService.cartNumber.next(s.numOfCartItems)}})}addFav(e){this._WishlistService.addToWishList(e).subscribe({next:s=>{console.log(s),this._ToastrService.success(s.message),this.wishListData=s.data}})}static#t=this.\u0275fac=function(s){return new(s||o)(t.Y36(c.M),t.Y36(l.N),t.Y36(C._W),t.Y36(v.M))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-products"]],standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[["class","py-4",4,"ngIf"],[1,"py-4"],[1,"text-center","py-3","text-main"],["type","text","placeholder","Search..",1,"form-control","w-50","mx-auto","form-control-sm","my-5",3,"ngModel","ngModelChange"],[1,"row","g-4"],["class","col-sm-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2"],[1,"product","h-100"],["class","fa-regular fa-heart heart",3,"click",4,"ngIf"],["role","button",3,"routerLink"],[1,"w-100",3,"src","title","alt"],[1,"h6"],[1,"h6","text-main"],[1,"d-flex","align-items-center","justify-content-between"],[1,"small"],[1,"fas","fa-star","rating-color"],[1,"text-muted"],[1,"main-btn","w-100",3,"click"],[1,"fa-regular","fa-heart","heart",3,"click"]],template:function(s,_){1&s&&t.YNc(0,x,7,5,"section",0),2&s&&t.Q6J("ngIf",_.products.length>0)},dependencies:[n.ez,n.sg,n.O5,n.H9,p.rH,h.r,a.C,i.u5,i.Fj,i.JJ,i.On]})}return o})()},6286:(m,d,r)=>{r.d(d,{N:()=>a});var n=r(5619),p=r(4769),h=r(9862);let a=(()=>{class i{constructor(c){this._HttpClient=c,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new n.X(0)}addToCart(c){return this._HttpClient.post(this.baseUrl+"cart",{productId:c})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(c){return this._HttpClient.delete(this.baseUrl+`cart/${c}`,{})}updateCartCount(c,l){return this._HttpClient.put(this.baseUrl+`cart/${c}`,{count:l})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(c,l){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${c}?url=http://localhost:4200`,{shippingAddress:l})}static#t=this.\u0275fac=function(l){return new(l||i)(p.LFG(h.eN))};static#e=this.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})()},0:(m,d,r)=>{r.d(d,{M:()=>h});var n=r(4769),p=r(9862);let h=(()=>{class a{constructor(t){this._HttpClient=t,this.baseUrl="https://ecommerce.routemisr.com/api/v1/"}getcategory(){return this._HttpClient.get(this.baseUrl+"categories")}getcategorydeatails(t){return this._HttpClient.get(this.baseUrl+`categories/${t}`)}getbrands(){return this._HttpClient.get(this.baseUrl+"brands")}getProduct(){return this._HttpClient.get(this.baseUrl+"products")}getCategories(){return this._HttpClient.get(this.baseUrl+"categories")}getProductDetails(t){return this._HttpClient.get(this.baseUrl+`products/${t}`)}static#t=this.\u0275fac=function(c){return new(c||a)(n.LFG(p.eN))};static#e=this.\u0275prov=n.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}return a})()}}]);